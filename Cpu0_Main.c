/*LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
銆愬钩    鍙般�戝寳浜緳閭辨櫤鑳界鎶�TC2/3xx鏍稿績鏉�
銆愮紪    鍐欍�慶hiusir
銆怑-mail銆慶hiusir@163.com
銆愯蒋浠剁増鏈�慥1.1 鐗堟潈鎵�鏈夛紝鍗曚綅浣跨敤璇峰厛鑱旂郴鎺堟潈
銆愭渶鍚庢洿鏂般��2021骞�1鏈�18鏃�
銆愮浉鍏充俊鎭弬鑰冧笅鍒楀湴鍧�銆�
銆愮綉    绔欍�慼ttp://www.lqist.cn
銆愭窐瀹濆簵閾恒�慼ttp://longqiu.taobao.com
------------------------------------------------
銆恉ev.env.銆慉URIX Development Studio1.2.2鍙婁互涓婄増鏈�
銆怲arget 銆� TC2/3xx
銆怌rystal銆� 20.000Mhz
銆怱YS PLL銆� 200/300MHz
________________________________________________________________
鍩轰簬iLLD_1_0_1_11_0搴曞眰绋嬪簭,
浣跨敤渚嬬▼鐨勬椂鍊欙紝寤鸿閲囩敤娌℃湁绌烘牸鐨勮嫳鏂囪矾寰勶紝
=================================================================
绋嬪簭閰嶅瑙嗛鍦板潃锛歨ttps://space.bilibili.com/95313236
=================================================================
鎽勫儚澶存帴鍙�                  榫欓偙绁炵溂鎴栬�匫V7725妯″潡
鈼� 鏁版嵁绔彛锛歅02.0-P02.7鍙ｏ紝鍏�8浣嶏紝鎺ユ憚鍍忓ご鐨勬暟鎹鍙ｏ紱
鈼� 鏃堕挓鍍忕礌锛氬閮ㄤ腑鏂0缁勶細P00_4锛�
鈼� 鍦轰俊鍙凤細澶栭儴涓柇绗�3缁勶細P15_1锛�
-----------------------------------------------------------------
鎺ㄨ崘GPT12妯″潡锛屽叡鍙互瀹炵幇5璺浜よВ鐮佸閲忕紪鐮佸櫒锛堝吋瀹瑰甫鏂瑰悜缂栫爜鍣級淇″彿閲囬泦锛屼换鎰忛�夋嫨鍥涜矾鍗冲彲锛�
P33_7, P33_6   榫欓偙TC姣嶆澘缂栫爜鍣�1
P02_8, P33_5   榫欓偙TC姣嶆澘缂栫爜鍣�2
P10_3, P10_1   榫欓偙TC姣嶆澘缂栫爜鍣�3
P20_3, P20_0   榫欓偙TC姣嶆澘缂栫爜鍣�4
-----------------------------------------------------------------
鐢垫劅鐢靛帇閲囬泦妯″潡鎴栬�呴害鍏嬮妯″潡
鎺ㄨ崘浣跨敤AN0-7锛屽叡鍏矾ADC锛屽彲浠ユ弧瓒砪hirp澹伴煶淇″彿鍙婄數纾佽溅鐢垫劅鐢靛帇閲囬泦锛�
AN0-3          榫欓偙TC鎺ュ洓涓害鍏嬮妯″潡鎴栬�呯數鎰�
-----------------------------------------------------------------
榛樿鐢垫満鎺ュ彛
浣跨敤GTM妯″潡锛孉TOM鍥涗釜閫氶亾鍙骇鐢�4*8鍏�32璺疨WM锛岃�屼笖鍚勮嚜棰戠巼鍜屽崰绌烘瘮鍙皟锛屾帹鑽愪娇鐢ˋTOM0鐨�0-7閫氶亾锛�
绗竴缁勫弻璺叏妗ラ┍鍔�
P23_1         榫欓偙TC姣嶆澘MOTOR1_P
P32_4         榫欓偙TC姣嶆澘MOTOR1_N
P21_2         榫欓偙TC姣嶆澘MOTOR2_P
P22_3         榫欓偙TC姣嶆澘MOTOR2_N
绗簩缁勫弻璺叏妗ラ┍鍔�
P21_4         榫欓偙TC姣嶆澘MOTOR3_P
P21_3         榫欓偙TC姣嶆澘MOTOR3_N
P20_8         榫欓偙TC姣嶆澘MOTOR4_P
P21_5         榫欓偙TC姣嶆澘MOTOR4_N
-----------------------------------------------------------------
榛樿鑸垫満鎺ュ彛
浣跨敤GTM妯″潡锛孉TOM鍥涗釜閫氶亾鍙骇鐢�4*8鍏�32璺疨WM锛岃�屼笖鍚勮嚜棰戠巼鍜屽崰绌烘瘮鍙皟锛屾帹鑽愪娇鐢ˋTOM2锛�
P33_10        榫欓偙TC姣嶆澘鑸垫満1
P33_13        榫欓偙TC姣嶆澘鑸垫満2
-----------------------------------------------------------------
 榛樿灞忓箷鏄剧ず鎺ュ彛锛岀敤鎴峰彲浠ヤ娇鐢═FT鎴栬�匫LED妯″潡
TFTSPI_CS     P20_14     榫欓偙TC姣嶆澘 CS绠¤剼 榛樿鎷変綆锛屽彲浠ヤ笉鐢�
TFTSPI_SCK    P20_11     榫欓偙TC姣嶆澘 SPI SCK绠¤剼
TFTSPI_SDI    P20_10     榫欓偙TC姣嶆澘 SPI MOSI绠¤剼
TFTSPI_DC     P20_12     榫欓偙TC姣嶆澘 D/C绠¤剼
TFTSPI_RST    P20_13     榫欓偙TC姣嶆澘 RESET绠¤剼
-----------------------------------------------------------------
OLED_CK       P20_14     榫欓偙TC姣嶆澘OLED CK绠¤剼
OLED_DI       P20_11     榫欓偙TC姣嶆澘OLED DI绠¤剼
OLED_RST      P20_10     榫欓偙TC姣嶆澘OLED RST绠¤剼
OLED_DC       P20_12     榫欓偙TC姣嶆澘OLED DC绠¤剼
OLED_CS       P20_13     榫欓偙TC姣嶆澘OLED CS绠¤剼 榛樿鎷変綆锛屽彲浠ヤ笉鐢�
----------------------------------------------------------------
榛樿鎸夐敭鎺ュ彛
KEY0p         P22_0      榫欓偙TC姣嶆澘涓婃寜閿�0
KEY1p         P22_1      榫欓偙TC姣嶆澘涓婃寜閿�1
KEY2p         P22_2      榫欓偙TC姣嶆澘涓婃寜閿�2
DSW0p         P33_9      榫欓偙TC姣嶆澘涓婃嫧鐮佸紑鍏�0
DSW1p         P33_11     榫欓偙TC姣嶆澘涓婃嫧鐮佸紑鍏�1
-----------------------------------------------------------------
榛樿LED鎺ュ彛
LED0p         P10_6      榫欓偙TC姣嶆澘鏍稿績鏉夸笂LED0 缈犵豢
LED1p         P10_5      榫欓偙TC姣嶆澘鏍稿績鏉夸笂LED1 钃濈伅
LED2p         P20_6      榫欓偙TC姣嶆澘涓奓ED0
LED3p         P20_7      榫欓偙TC姣嶆澘涓奓ED1
-----------------------------------------------------------------
榛樿铚傞福鍣ㄦ帴鍙�
BEEPp         P33_8      榫欓偙TC姣嶆澘涓婅渹楦ｅ櫒鎺ュ彛
-----------------------------------------------------------------
瀹氭椂鍣�
鏈変袱涓狢CU6妯″潡  姣忎釜妯″潡鏈変袱涓嫭绔嬪畾鏃跺櫒  瑙﹀彂瀹氭椂鍣ㄤ腑鏂�
鎺ㄨ崘浣跨敤CCU6妯″潡锛孲TM鐢ㄤ綔绯荤粺鏃堕挓鎴栬�呭欢鏃讹紱
QQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQ*/

#include <include.h>//鍚勪釜妯″潡鐨勫ご鏂囦欢
#include <IfxCpu.h>
#include <IfxScuCcu.h>
#include <IfxScuWdt.h>
#include <IfxStm.h>
#include <IfxStm_reg.h>
#include <LQ_GPIO_KEY.h>
#include <LQ_GPIO_LED.h>
#include <LQ_Inductor.h>
#include <LQ_MotorServo.h>
#include <LQ_STM.h>
#include <LQ_TFT18.h>
#include <LQ_UART.h>
#include <Platform_Types.h>
#include <stdio.h>

App_Cpu0 g_AppCpu0; // brief CPU 0 global data
IfxCpu_mutexLock mutexCpu0InitIsOk = 1;   // CPU0 鍒濆鍖栧畬鎴愭爣蹇椾綅
volatile char mutexCpu0TFTIsOk=0;         // CPU1 0鍗犵敤/1閲婃斁 TFT

/*************************************************************************
*  鍑芥暟鍚嶇О锛歩nt core0_main (void)
*  鍔熻兘璇存槑锛欳PU0涓诲嚱鏁�
*  鍙傛暟璇存槑锛氭棤
*  鍑芥暟杩斿洖锛氭棤
*  淇敼鏃堕棿锛�2020骞�3鏈�10鏃�
*  澶�    娉細
*************************************************************************/
int core0_main (void)
{
    //char txt[16];

	// 鍏抽棴CPU鎬讳腑鏂�
	IfxCpu_disableInterrupts();

	// 鍏抽棴鐪嬮棬鐙楋紝濡傛灉涓嶈缃湅闂ㄧ嫍鍠傜嫍闇�瑕佸叧闂�
	IfxScuWdt_disableCpuWatchdog(IfxScuWdt_getCpuWatchdogPassword());
	IfxScuWdt_disableSafetyWatchdog(IfxScuWdt_getSafetyWatchdogPassword());

	// 璇诲彇鎬荤嚎棰戠巼
	g_AppCpu0.info.pllFreq = IfxScuCcu_getPllFrequency();
	g_AppCpu0.info.cpuFreq = IfxScuCcu_getCpuFrequency(IfxCpu_getCoreIndex());
	g_AppCpu0.info.sysFreq = IfxScuCcu_getSpbFrequency();
	g_AppCpu0.info.stmFreq = IfxStm_getFrequency(&MODULE_STM0);

	TFTSPI_Init(0);               // TFT1.8鍒濆鍖�0:妯睆  1锛氱珫灞�
	TFTSPI_CLS(u16BLACK);         // 娓呭睆
	TFTSPI_Show_Logo(0,37);       // 鏄剧ず榫欓偙LOGO
	TFTSPI_P16x16Str(0,0,(unsigned char*)"鍖椾含榫欓偙鏅鸿兘绉戞妧",u16RED,u16BLUE);// 瀛楃涓叉樉绀�
	delayms(1000);
	// 鎸夐敭鍒濆鍖�
	GPIO_KEY_Init();
	// LED鐏墍鐢≒10.6鍜孭10.5鍒濆鍖�
	GPIO_LED_Init();

	// 涓插彛P14.0绠¤剼杈撳嚭,P14.1杈撳叆锛屾尝鐗圭巼115200
	UART_InitConfig(UART0_RX_P14_1,UART0_TX_P14_0, 115200);

	// 寮�鍚疌PU鎬讳腑鏂�
	IfxCpu_enableInterrupts();

	// 閫氱煡CPU2銆丆PU1锛孋PU0鍒濆鍖栧畬鎴�
	IfxCpu_releaseMutex(&mutexCpu0InitIsOk);

	// 鍒囪CPU0,CPU1...涓嶅彲浠ュ悓鏃跺紑鍚睆骞曟樉绀猴紝鍚﹀垯鍐茬獊涓嶆樉绀�
	mutexCpu0TFTIsOk=0;      // CPU1锛� 0鍗犵敤/1閲婃斁 TFT

    // 绋嬪簭閰嶅瑙嗛鍦板潃锛歨ttps://space.bilibili.com/95313236
    // 浠ヤ笅娴嬭瘯鍑芥暟锛屽唴寤烘寰幆锛岀敤鎴峰彲璋冪敤鎵�鐢ㄦā鍧楃殑鍒濆鍖栧強璇诲啓鍑芥暟鏉ュ疄鐜拌嚜宸辩殑浠诲姟锛屽姟蹇呮鏌ヤ腑鏂墍鐢–PU
	//________________________________________________________________________________
	//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//    Test_ADC_OLED();      //PASS,娴嬭瘯ADC閲囨牱鏃堕棿  OLED涓婃樉绀� ADC閲囨牱10K娆℃椂闂�
//    Test_ADC_TFT();        //PASS,娴嬭瘯ADC閲囨牱鏃堕棿 TFT涓婃樉绀� ADC閲囨牱10K娆℃椂闂�
//    Test_ADC_7mic();       //PASS,娴嬭瘯ADC\UART0銆丼TM寤舵椂鍜岄棯鐏紝閫氳繃UART0鎵撳嵃 AN0--AN7鍏�8涓�氶亾ADC杞崲鏁版嵁
//    Test_GPIO_Extern_Int();//PASS,娴嬭瘯澶栭儴绗�1缁勪腑鏂璓15.8锛孭10.6鍜孭10.5闂伅
  // TestMotor();	         //PASS,娴嬭瘯鐢垫満鍑芥暟锛岄�氳繃鎸夐敭淇敼杈撳嚭PWM锛屽湪TFT1.8灞忓箷鏄剧ず锛岄�氳繃瀹忓畾涔夐�夋嫨瀵瑰簲鐨勯┍鍔ㄦā鍧�
   // TestServo();	         //PASS,娴嬭瘯鑸垫満鍑芥暟锛岄�氳繃鎸夐敭淇敼杈撳嚭PWM锛屽湪TFT1.8灞忓箷鏄剧ず
  // TestEncoder();         //PASS,娴嬭瘯缂栫爜鍣紝灞忓箷鏄剧ず缂栫爜鍣ㄨ鍊硷紝瀵瑰簲姣嶇増涓婄紪鐮佸櫒2鍜岀紪鐮佸櫒4閫氶亾
//    Test_GPIO_LED();       //PASS,娴嬭瘯GPIO锛孭10.6鍜孭10.5闂伅
//    Test_GPIO_KEY();       //PASS,娴嬭瘯澶栭儴鎸夐敭杈撳叆锛孭22.0--2   鎸変笅鎸夐敭 LED浜�
//    Test_ComKEY_Tft();     //PASS,娴嬭瘯澶栭儴缁勫悎鎸夐敭杈撳叆骞禩FT1.8鏄剧ず锛孭22.0--2
//    Test_OLED();           //PASS,娴嬭瘯OLED0.96灞忎娇鐢≒20.14--10锛屾樉绀哄瓧绗︿覆鍙婂姩鎬佹暟鎹�
//    LQ_STM_Timer();        //PASS,娴嬭瘯瀹氭椂涓柇銆侀棯鐏�
//    LQ_CCU6_Timer();       //PASS,娴嬭瘯瀹氭椂涓柇銆侀棯鐏紝CC60榛樿鏀綜PU0娴嬭瘯锛孋CU61榛樿鏀綜PU1娴嬭瘯
//    Test_TFT18();          //PASS,娴嬭瘯TFT1.8褰╁睆浣跨敤P20.14--10锛屾樉绀哄瓧绗︿覆鍙婂姩鎬佹暟鎹�
//    LQ_TIM_InputCature();  //PASS,娴嬭瘯GTM_TOM_TIM銆丳20_9浣滀负PWM杈撳嚭鍙ｏ紝P15_0浣滀负TIM杈撳叆鍙ｏ紝涓よ�呯煭鎺ュ悗锛屼覆鍙14.0鍙戦�佸埌涓婁綅鏈�
//    Test_Bluetooth();      //PASS,娴嬭瘯UART0(P14.0RX/P14.1TX)锛�
//    Test_EEPROM();         //PASS,娴嬭瘯鍐呴儴EEPROM鎿﹀啓鍔熻兘  OLED鎻愮ず鏄惁鍐欏叆鎴愬姛
//    Test_Vl53();           //PASS,娴嬭瘯VL53  IIC鎺ョ嚎   P13_1鎺CL  P13_2鎺DA OLED鏄剧ず鍘熷鏁版嵁
//    Test_MPU6050();        //PASS,娴嬭瘯MPU6050鎴栬�匢CM20602 IIC鎺ョ嚎   P13_1鎺CL  P13_2鎺DA OLED鏄剧ず鍘熷鏁版嵁
//    Test_ICM20602();       //PASS,娴嬭瘯ICM20602 SPI鎺ョ嚎   P15_8鎺CL  P15_5鎺DA  P15_7鎺A  P15_2鎺S OLED鏄剧ず鍘熷鏁版嵁
   // Test_CAMERA();         //PASS,榛樿鏀綜PU0涓祴璇曢緳閭辩鐪兼憚鍍忓ご骞跺湪灞忓箷涓婃樉绀�  LQ_CAMERA.h 涓�夋嫨灞忓箷
//    Test_SoftFft();        //PASS,娴嬭瘯ILLD搴撶殑杞欢FFT鍑芥暟锛涚‖浠禙FT闇�瑕佽姱鐗囧悗缂�甯A鐨勬墠鏈夌‖浠禙FT鍔熻兘
//    Test_RDA5807();        //PASS,娴嬭瘯RDA5807绔嬩綋澹版敹闊虫満SCL 鎺� P00_1   SDA 鎺� P00_2

	//________________________________________________________________________________
    //~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//	test();
//	circle();//鍦嗙幆
    while (1)	//涓诲惊鐜�
    {
        CameraCar();
//        LED_Ctrl(LED0, RVS);     // LED闂儊 鎸囩ず绋嬪簭杩愯鐘舵��
//        delayms(20);
    }
}
